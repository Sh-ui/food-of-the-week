/* Print Styles for Food of the Week */
/* Note: Primary print styling is now handled by PrintButton.astro using print-config.json */
/* This CSS serves as a fallback for browsers that block popups */

@media print {
  /* Hide all interactive and navigation elements */
  .print-button,
  .print-buttons,
  button,
  nav,
  .site-footer,
  .cooked-indicator {
    display: none !important;
  }

  /* Reset page styles for print */
  body {
    margin: 0;
    padding: 0;
    background: white;
    color: black;
    font-family: 'Work Sans', -apple-system, sans-serif;
    font-size: 11pt;
    line-height: 1.5;
    width: 100%;
  }

  /* Headings use Aleo */
  h1, h2, h3, h4, h5, h6 {
    font-family: 'Aleo', Georgia, serif;
    color: #333 !important;
  }

  /* Hide all sections by default when printing specific sections */
  body:not([data-print-target="all"]) .print-section {
    display: none !important;
  }

  /* Show only the targeted section */
  body[data-print-target="grocery-list"] #print-section-grocery-list,
  body[data-print-target="meal-1"] #print-section-meal-1,
  body[data-print-target="meal-2"] #print-section-meal-2,
  body[data-print-target="meal-3"] #print-section-meal-3,
  body[data-print-target="meal-4"] #print-section-meal-4,
  body[data-print-target="meal-5"] #print-section-meal-5,
  body[data-print-target="meal-6"] #print-section-meal-6 {
    display: block !important;
  }

  /* Show all sections when printing full week */
  body[data-print-target="all"] .print-section {
    display: block !important;
  }

  /* Page breaks */
  .print-section.meal {
    page-break-after: always;
    page-break-inside: avoid;
  }

  /* Don't break after the last meal */
  .print-section.meal:last-of-type {
    page-break-after: auto;
  }

  /* Grocery list on its own page when printing all */
  body[data-print-target="all"] #print-section-grocery-list {
    page-break-after: always;
  }

  /* Avoid breaking within key elements */
  .meal-details,
  .meal-instructions,
  .meal-instructions-phased,
  .instruction-phase,
  .grocery-category {
    page-break-inside: avoid;
  }

  /* Typography adjustments */
  h1 {
    font-size: 24pt;
    margin-bottom: 12pt;
    line-height: 1.2;
  }

  h2 {
    font-size: 18pt;
    margin-top: 8pt;
    margin-bottom: 10pt;
    line-height: 1.2;
  }

  h3 {
    font-size: 14pt;
    margin-top: 8pt;
    margin-bottom: 8pt;
    line-height: 1.2;
  }

  p {
    margin-bottom: 8pt;
  }

  /* Remove backgrounds and borders */
  .section {
    background: transparent;
    border: none;
    padding: 0;
    margin-bottom: 0;
  }

  .meal-details {
    background: transparent;
    border: 1px solid #ccc;
    padding: 10pt;
    margin-bottom: 10pt;
  }

  .grocery-category {
    background: transparent;
    padding: 0;
    margin-bottom: 12pt;
  }

  /* Checkbox styling for print - base */
  input[type="checkbox"] {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    width: 12pt;
    height: 12pt;
    border: 1pt solid #000;
    margin-right: 6pt;
    position: relative;
    top: 2pt;
    background: white;
  }

  /* Local checkbox - checked with checkmark */
  .grocery-item.locally-checked input[type="checkbox"]::after {
    content: "✓";
    position: absolute;
    top: -2pt;
    left: 2pt;
    font-size: 10pt;
    color: #000;
  }

  /* Global checkbox - filled circle inside */
  .grocery-item.globally-checked input[type="checkbox"]::after {
    content: "●";
    position: absolute;
    top: -1pt;
    left: 2pt;
    font-size: 8pt;
    color: #666;
  }

  /* Global checkbox text - greyed but not crossed out */
  .grocery-item.globally-checked .item-text {
    color: #666 !important;
    text-decoration: none !important;
  }

  /* Local checkbox text - crossed out */
  .grocery-item.locally-checked .item-text {
    text-decoration: line-through;
    color: #666 !important;
  }

  /* Cooked meals - greyed out */
  .meal-cooked,
  .meal-cooked * {
    color: #888 !important;
  }

  .meal-cooked .meal-details {
    border-color: #ccc !important;
  }

  /* Grocery list formatting */
  .grocery-items {
    margin-left: 0;
    display: flex;
    flex-direction: column;
    gap: 4pt;
  }

  .grocery-item {
    margin: 0;
  }

  .grocery-item label {
    display: flex;
    align-items: flex-start;
    gap: 6pt;
    line-height: 1.4;
  }

  .item-text {
    flex: 1;
  }

  /* Meal formatting */
  .meal-field {
    margin-bottom: 6pt;
  }

  .meal-field strong {
    font-weight: bold;
  }

  /* Ensure good spacing */
  .meal-header {
    margin-bottom: 10pt;
  }

  .meal-instructions,
  .meal-instructions-phased {
    margin-top: 10pt;
  }

  /* Instruction phases - remove colors for print */
  .instruction-phase {
    background: transparent !important;
    border-left: 2pt solid #666 !important;
    padding: 8pt;
    margin-bottom: 10pt;
  }

  .instruction-phase h3 {
    color: #333 !important;
  }

  /* List formatting */
  ul, ol {
    margin-left: 20pt;
    margin-bottom: 8pt;
  }

  li {
    margin-bottom: 4pt;
  }

  /* Hide section headers when printing single section */
  body[data-print-target="grocery-list"] .page-header,
  body[data-print-target^="meal-"] .page-header {
    display: none;
  }

  /* Container adjustments */
  .container {
    max-width: 100%;
    margin: 0;
    width: 100%;
  }

  .weekly-plan {
    padding: 0;
  }

  /* Ensure meals container doesn't add extra space */
  .meals-container {
    gap: 0;
  }

  /* Links */
  a {
    color: #000;
    text-decoration: underline;
  }

  /* Print-specific title for single sections */
  body[data-print-target="grocery-list"] #print-section-grocery-list::before {
    content: "Grocery List";
    display: block;
    font-family: 'Aleo', Georgia, serif;
    font-size: 24pt;
    font-weight: bold;
    margin-bottom: 12pt;
  }

  body[data-print-target="grocery-list"] #print-section-grocery-list h2 {
    display: none;
  }

  /* Page margins */
  @page {
    margin: 0.5in;
  }

  /* Keep semantic colors for borders only */
  .meal-details {
    border-color: #666 !important;
  }
}
